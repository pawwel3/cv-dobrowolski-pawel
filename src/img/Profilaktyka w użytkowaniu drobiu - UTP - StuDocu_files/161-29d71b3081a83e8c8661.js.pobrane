(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[161],{Y6V1:function(e,t,a){e.exports={"toggle-button":"toggle-button--e3slL",toggleButton:"toggle-button--e3slL","sidebar-open":"sidebar-open--1J5P2",sidebarOpen:"sidebar-open--1J5P2","toggle-text":"toggle-text--1z6MQ",toggleText:"toggle-text--1z6MQ",mobile:"mobile--KLenp"}},nYU1:function(e,t,a){e.exports={"show-more-link":"show-more-link--2vTND",showMoreLink:"show-more-link--2vTND"}},sdAw:function(e,t,a){"use strict";a.r(t);var i=a("lSNA"),s=a.n(i),o=a("q1tI"),n=a.n(o),r=a("17x9"),u=a.n(r),c=a("kX0S"),l=a("d2gv"),d=a.n(l),p=a("cr+I"),h=a("TSYQ"),m=a.n(h),g=a("YcKG"),b=a.n(g),w=a("Mwj6"),R=a("O84i"),v=a("dgVh"),_=a("NtzC"),f=a("3/WH"),S=a("dZ99"),E=a("aK6K"),q=a("pF64"),k=a("fT5s"),y=a("0pXI");var O=(e,t,a)=>i=>i(Object(y.a)("Document Read",{"Document ID":e,"Page Count":t,"Reading Time":a})),j=a("PEPy"),M=a("sygv"),P=a("SgqP"),L=a("0o9W"),C=a("bjR7"),D=a("sFzn"),x=a("jWjh"),T=a("k9ah"),U=a("XMJP"),H=a("odUq"),N=a("mFh+"),I=a("ovGK"),F=a("hSgt"),z=a("jiZR");var A=e=>({type:z.SET_SHOULD_SHOW_EXIT_POPUP,shouldShowExitPopUp:e}),B=a("vDqi"),V=a.n(B),W=a("Elhd"),Y=a.n(W);var G=e=>t=>(t(Object(y.a)("Viewer Exit Popup Shown",{"Time to Show":e+" Seconds"})),Promise.all([V.a.post(Y.a.route("api.exit.popup.shown"))])),K=a("aVRt"),Q=a("B8p9"),$=a("v+l3"),J=a("nQnF"),X=a("BdiA"),Z=a("xVrC"),ee=a("GN0R"),te=a("rtp2"),ae=a("xZ14"),ie=a("77Ab"),se=a("yM03"),oe=a("BSJu"),ne=a("77UF");class re extends o.Component{constructor(...e){super(...e),s()(this,"interval",null)}componentDidMount(){let e=0;const{repeat:t}=this.props;let{lapTime:a}=this.props;Object(ne.c)(a)||(a=[a]),this.interval=window.setInterval(()=>{document.hidden||(e+=1,a.includes(e)&&this.props.onTimerReachLap(e),Math.max(...a)<=e&&(t?e=0:window.clearInterval(this.interval)))},1e3)}render(){return n.a.createElement(o.Fragment,null)}}s()(re,"propTypes",{onTimerReachLap:u.a.func,lapTime:u.a.oneOfType([u.a.number,u.a.arrayOf(u.a.number)]).isRequired,repeat:u.a.bool}),s()(re,"defaultProps",{onTimerReachLap:ne.i});var ue=re,ce=a("ySMY"),le=a("AEJn"),de=a("2gM/"),pe=a("2iE4"),he=a("kajk"),me=a("ps0s"),ge=a("Pqt4"),be=a("nYU1"),we=a.n(be);const Re={show:u.a.bool.isRequired,cdn:u.a.shape({cdn_enabled:u.a.bool,aws_cloudfront_assets:u.a.string.isRequired}).isRequired,onHide:u.a.func.isRequired,user:u.a.shape({isLoggedIn:u.a.bool,allowsPremiumDocuments:u.a.bool,isPremium:u.a.bool,isStaff:u.a.bool}).isRequired,documentsQuantity:u.a.number,documents:u.a.arrayOf(u.a.shape({id:u.a.number.isRequired,title:u.a.string.isRequired,rating:u.a.shape({total:u.a.number.isRequired}).isRequired,category:u.a.shape({id:u.a.number.isRequired}).isRequired,course:u.a.shape({name:u.a.string.isRequired,code:u.a.string,institution:u.a.shape({name:u.a.string.isRequired,study_search_is_visible:u.a.bool}).isRequired}).isRequired,book:u.a.shape({title:u.a.string.isRequired,author:u.a.string.isRequired}),activeFile:u.a.shape({pages:u.a.number.isRequired}).isRequired,study:u.a.arrayOf(u.a.shape({name:u.a.string.isRequired})),premium:u.a.bool,created:u.a.number.isRequired,rating_positive:u.a.number.isRequired,rating_negative:u.a.number.isRequired,rating_past_15_months:u.a.number,rating_positive_past_15_months:u.a.number,rating_negative_past_15_months:u.a.number,rating_past_18_months:u.a.number,rating_positive_past_18_months:u.a.number,rating_negative_past_18_months:u.a.number})).isRequired,onShowMoreClick:u.a.func.isRequired,formatLanguage:u.a.string.isRequired,onDocumentClicked:u.a.func.isRequired,testRatingsTimeRange:u.a.string.isRequired},ve=({documents:e,show:t,onHide:a,onShowMoreClick:i,testRatingsTimeRange:s,user:o,onDocumentClicked:r,cdn:u,formatLanguage:c,documentsQuantity:l=3})=>{const p=e.slice(0,l);return n.a.createElement(pe.k,{show:t,onHide:a,size:"large"},n.a.createElement(pe.k.Header,null,d.a.get("not_the_document_looking_for")),n.a.createElement(pe.k.Body,null,n.a.createElement("p",null,d.a.get("we_have_options_for_you")),p.map((e,t)=>n.a.createElement(he.a,{dataTestSelector:"document-related-documents-modal",key:e.id,id:e.id,url:b.a.document(e),positiveRating:e.rating_positive,negativeRating:e.rating_negative,testRatingsTimeRange:s,ratingPast15Months:e.rating_past_15_months,ratingPositivePast15Months:e.rating_positive_past_15_months,ratingNegativePast15Months:e.rating_negative_past_15_months,ratingPast18Months:e.rating_past_18_months,ratingPositivePast18Months:e.rating_positive_past_18_months,ratingNegativePast18Months:e.rating_negative_past_18_months,searchPos:t+1,user:o,name:e.title,rating:e.rating.total,premium:e.premium,is_viewable:e.is_viewable,categoryId:e.category.id,course:e.course,institution:e.course.institution,book:e.book,study:e.study,onElementClicked:e=>r(e,t+1,p.length),thumbnailUrl:Object(me.b)(e,u),largeThumbnailUrl:Object(me.b)(e,u,ge.f),pages:e.activeFile.pages,examDate:e.exam,createdAt:e.created,formatLanguage:c,academicYear:e.academicYear}))),n.a.createElement(pe.k.Footer,null,n.a.createElement("div",{className:"text-center"},n.a.createElement(pe.c,{className:we.a.showMoreLink,color:"link",size:"minimum",onClick:i},d.a.get("show_more")))))};ve.propTypes=Re;var _e=ve,fe=a("geob"),Se=a("IP2g"),Ee=a("/MKj"),qe=a("Y6V1"),ke=a.n(qe),ye=a("4Rjq");const Oe={isSidebarOpen:u.a.bool.isRequired,onClick:u.a.func.isRequired};function je({isSidebarOpen:e,onClick:t}){const a=Object(Ee.useSelector)(ye.f);return n.a.createElement(pe.c,{size:"minimum",color:"clear",type:"button",className:m()(ke.a.toggleButton,{[ke.a.sidebarOpen]:e,"hidden-xs":!e}),onClick:t},n.a.createElement(Se.a,{icon:"angle-double-"+(e?"left":"right"),size:"1x"}),e&&n.a.createElement("span",{className:m()(ke.a.toggleText,{[ke.a.mobile]:a})},d.a.get("hide")))}je.propTypes=Oe;var Me=je;const Pe={cdn:u.a.object.isRequired,formatLanguage:u.a.string.isRequired,testRatingsTimeRange:u.a.string.isRequired,meta:u.a.shape({isMetering:u.a.bool.isRequired}).isRequired,user:u.a.shape({isLoggedIn:u.a.bool.isRequired}).isRequired,config:u.a.shape({app:u.a.object.isRequired}),course:u.a.shape({institution:u.a.object.isRequired}).isRequired,document:u.a.shape({pages:u.a.number.isRequired,assets:u.a.object.isRequired,course:u.a.object.isRequired,active_file:u.a.object.isRequired}).isRequired,language:u.a.string.isRequired,docConfig:u.a.shape({bookCategories:u.a.array.isRequired}).isRequired,currentUrl:u.a.string.isRequired,breadcrumb:u.a.string,canonicalUrl:u.a.string,currentLocale:u.a.string,autoFollowEvent:u.a.object,relatedDocuments:u.a.arrayOf(u.a.shape({id:u.a.number.isRequired,title:u.a.string.isRequired,category:u.a.object,pages:u.a.number,isPremium:u.a.bool,isApproved:u.a.bool,activeFile:u.a.shape({pages:u.a.number.isRequired}),isNew:u.a.bool,academicYear:u.a.string,rating:u.a.object,userStudylistIds:u.a.array})),trackDocumentView:u.a.func.isRequired,trackGenericEvent:u.a.func.isRequired,documentMetaInfo:u.a.shape({localizedCategoryName:u.a.string.isRequired,allowedLanguageCategoryName:u.a.string.isRequired}),relatedStudylists:u.a.array.isRequired,fallbackLanguages:u.a.object,selectableLanguages:u.a.array,trackDocumentRead:u.a.func.isRequired,trackReportDocumentClick:u.a.func.isRequired,setExitPopupAsShown:u.a.func.isRequired,trackShowMoreClicked:u.a.func.isRequired,trackExitModalRelatedDocumentClicked:u.a.func.isRequired,onToggleSidebar:u.a.func.isRequired,onHideShareModal:u.a.func.isRequired,showShareModal:u.a.bool.isRequired,showSidebar:u.a.bool.isRequired,shouldShowExitPopUp:u.a.bool};class Le extends o.Component{static initialActions({dispatch:e},t){let a=[];return t.user.metaInfo.activePaymentPlan&&(a=[t.user.metaInfo.activePaymentPlan]),Promise.all([e(Object(_.a)(t.document)),e(Object(S.a)(t.course)),e(Object(q.a)(t.events)),e(Object(j.a)(t.relatedDocuments)),e(Object(M.a)(t.user.metaInfo.seenDocumentsCount)),e(Object(C.a)(Object(p.parse)(t.search.queryParams))),e(Object(f.a)(t.comments)),e(Object(L.a)(t.userInTrial)),e(Object(P.a)(a,0)),e(Object(D.a)(t.user.studylists)),e(Object(x.a)(t.showDefaultStudylist)),e(Object(T.a)({exams:{dates:t.examDatesConfig}})),e(Object(H.b)(t.document)),e(Object(N.a)(t.relatedStudylists)),e(Object(I.a)(t.documentPreviewText)),e(Object(F.a)(ee.d)),e(A(Boolean(t.shouldShowExitPopUp))),e(Object($.a)(!0)),e(Object(J.a)(!1)),e(Object(X.a)(!t.meta.isMobile))])}constructor(e){super(e),s()(this,"state",{reportModalOpen:!1,viewerWidth:0,viewerHeight:0,navigationStart:Date.now(),showExitPopup:!1}),s()(this,"handleShowExitPopup",()=>{var e;null===(e=document.body)||void 0===e||e.removeEventListener("mouseleave",this.handleShowExitPopup),this.setState({showExitPopup:!0},()=>{const e=Math.round((Date.now()-this.state.navigationStart)/1e3);this.props.setExitPopupAsShown(e)})}),s()(this,"handleHideExitPopup",()=>this.setState({showExitPopup:!1})),s()(this,"handleShowMoreClick",e=>{const t=Object(w.a)(e),a=b.a.search(this.props.document.title,{},{normalize:!0});this.props.trackShowMoreClicked(a,t)}),s()(this,"handleExitModalDocumentClicked",(e,t,a)=>{this.props.trackExitModalRelatedDocumentClicked(t,a,e.href,e.openInNewTab)}),s()(this,"handleResizeElements",()=>{const e=this.viewer.current.viewerWrapper.current,t=window.innerHeight-e.getBoundingClientRect().top;this.documentViewer.current.getElementsByClassName("document-viewer-sidebar")[0].style.height=t+"px";const a=window.innerWidth-e.getBoundingClientRect().left;this.setState({viewerWidth:a,viewerHeight:t})}),s()(this,"handleGestureStart",e=>{e.preventDefault()}),s()(this,"handleDocumentReadFocusLap",e=>this.props.trackDocumentRead(this.props.document,e)),s()(this,"handleHideOverlay",()=>this.setState({reportModalOpen:!1})),s()(this,"handleShowReportDocumentModal",(e=!1)=>{e||this.props.trackReportDocumentClick(),this.setState({reportModalOpen:!0,wasRatedLow:e})}),s()(this,"handleHideShareModal",()=>this.props.onHideShareModal()),this.viewer=n.a.createRef(),this.documentViewer=n.a.createRef()}componentDidMount(){var e;(this.props.trackDocumentView(this.props.document),this.props.trackGenericEvent(this.props.autoFollowEvent),this.handleResizeElements(),window.addEventListener("resize",this.handleResizeElements),document.addEventListener("gesturestart",this.handleGestureStart),this.props.shouldShowExitPopUp)&&(null===(e=document.body)||void 0===e||e.addEventListener("mouseleave",this.handleShowExitPopup))}componentDidUpdate(e){if(e.showSidebar!==this.props.showSidebar){const e=this.viewer.current.viewerWrapper.current,t=window.innerWidth-e.getBoundingClientRect().left;this.setState({viewerWidth:t})}}componentWillUnmount(){var e;window.removeEventListener("resize",this.handleResizeElements),document.removeEventListener("gesturestart",this.handleGestureStart),null===(e=document.body)||void 0===e||e.removeEventListener("mouseleave",this.handleShowExitPopup)}render(){const e=`${this.props.document.assets.url+this.props.document.active_file.object_key}.html${this.props.document.assets.querystring}`,t=[];for(let e=1;e<=this.props.document.pages;e+=1)t.push(`${this.props.document.assets.url+this.props.document.active_file.object_key+e}.page${this.props.document.assets.querystring}`);return n.a.createElement(o.Fragment,null,n.a.createElement(se.a,null,n.a.createElement("style",{dangerouslySetInnerHTML:{__html:"\n                            body {\n                                margin:0;\n                                overflow: hidden;\n                                background-color: #fff;\n                            }\n                            .wrapper-content {\n                                margin-bottom: 0;\n                            }\n                        "}}),n.a.createElement(le.a,{document:this.props.document,breadcrumb:this.props.breadcrumb,meta:this.props.meta}),n.a.createElement("link",{rel:"stylesheet",crossOrigin:"anonymous",type:"text/css",href:`${this.props.document.assets.url+this.props.document.active_file.object_key}.css${this.props.document.assets.querystring}`}),n.a.createElement(de.a,{selectableLanguages:this.props.selectableLanguages||[],uniLanguage:this.props.document.course.institution.language.geocode,document:this.props.document,currentLocale:this.props.currentLocale,appDomains:this.props.config&&this.props.config.app.domains||{},fullUrl:this.props.currentUrl,canonicalUrl:this.props.canonicalUrl,localizedCategoryName:this.props.documentMetaInfo&&this.props.documentMetaInfo.localizedCategoryName,allowedLanguageCategoryName:this.props.documentMetaInfo&&this.props.documentMetaInfo.allowedLanguageCategoryName,fallbackLanguages:this.props.fallbackLanguages})),n.a.createElement("div",{className:"document-viewer",ref:this.documentViewer},n.a.createElement("div",{className:m()("sidebar-wrapper",{"sidebar-open":this.props.showSidebar})},n.a.createElement("div",{className:"top-bar-wrapper"},n.a.createElement(Me,{isSidebarOpen:this.props.showSidebar,onClick:()=>this.props.onToggleSidebar("Top Bar")})),n.a.createElement(ce.a,{open:this.props.showSidebar,document:this.props.document,user:this.props.user,onSidebarToggle:this.props.onToggleSidebar,configBookCategories:this.props.docConfig.bookCategories,currentUrl:this.props.currentUrl,course:this.props.course,config:this.props.docConfig,language:this.props.language,relatedDocuments:this.props.relatedDocuments,dataTestSelector:"document-viewer-sidebar",onShowReportDocumentModal:this.handleShowReportDocumentModal,relatedStudylists:this.props.relatedStudylists})),n.a.createElement(ie.a,{pages:t,ref:this.viewer,document:this.props.document,documentStructureUrl:e,width:this.state.viewerWidth,height:this.state.viewerHeight,sidebarOpen:this.props.showSidebar}),n.a.createElement(ue,{lapTime:[60],onTimerReachLap:this.handleDocumentReadFocusLap})),n.a.createElement(ae.a,{isFullPage:!0,show:this.state.reportModalOpen,onClick:this.handleHideOverlay}),n.a.createElement(oe.a,{show:this.state.reportModalOpen,onHide:this.handleHideOverlay,title:this.state.wasRatedLow?d.a.get("negative_rate_report"):d.a.get("report_document")}),n.a.createElement(_e,{show:this.state.showExitPopup,cdn:this.props.cdn,onHide:this.handleHideExitPopup,user:this.props.user,documents:this.props.relatedDocuments,onShowMoreClick:this.handleShowMoreClick,formatLanguage:this.props.formatLanguage,onDocumentClicked:this.handleExitModalDocumentClicked,testRatingsTimeRange:this.props.testRatingsTimeRange}),n.a.createElement(fe.a,{show:this.props.showShareModal,onHide:this.handleHideShareModal}))}}Le.propTypes=Pe,Le.defaultProps={config:null,breadcrumb:null,canonicalUrl:null,currentLocale:null,autoFollowEvent:null,documentMetaInfo:null,fallbackLanguages:null,selectableLanguages:[],relatedDocuments:[],shouldShowExitPopUp:!1};t.default=Object(te.a)(Object(c.connect)(e=>{let t;return e.segment.events&&(t=e.segment.events["Follow Course"]),{document:e.document.current,user:e.user,docConfig:e.meta.config,course:e.course.current,currentUrl:e.meta.currentUrl,language:e.meta.currentLanguage,autoFollowEvent:t,relatedDocuments:Object(v.b)(e),relatedStudylists:e.studylist.list,meta:e.meta,shouldShowExitPopUp:e.document.shouldShowExitPopUp,cdn:e.meta.cdn,formatLanguage:e.meta.formatLanguage,testRatingsTimeRange:e.ab.testRatingsTimeRange,showShareModal:Object(R.b)(e),showSidebar:Object(R.c)(e)}},e=>({trackDocumentView:t=>e(Object(E.a)(t)),trackGenericEvent:t=>e(Object(k.a)(t)),trackReportDocumentClick:()=>e(U.a),trackDocumentRead:(t,a)=>e(O(t.id,t.pages,a)),trackShowMoreClicked:(t,a)=>e(Object(Q.a)("Show More Clicked",{Origin:"Viewer Exit Popup"},{href:t,isNewTab:a})),trackExitModalRelatedDocumentClicked:(t,a,i,s)=>e(Object(K.a)(t,a,{href:i,isNewTab:s},"Viewer Exit Popup")),setExitPopupAsShown:t=>e(G(t)),onToggleSidebar:t=>e(Object(Z.a)(t)),onHideShareModal:()=>e(Object(J.a)(!1))}))(Le))}},[["sdAw",1,2,0,3,4,5,6,8,7,9,10,11,12,13,14,15,16,19,18,20,24,23,22,26,25,28,27,30,34,31,35,38,29,36,33,37,41,46,44,42,43,45,52,48,55,54,51,61,56,60,57,59,69,67,65,78,82,77,83,72,76,81,98,99,101,100,122,121,123]]]);