(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[52],{"/U6g":function(t,e,s){t.exports={"login-wrapper":"login-wrapper--2gOWz",loginWrapper:"login-wrapper--2gOWz","credentials-icon":"credentials-icon--g8ajI",credentialsIcon:"credentials-icon--g8ajI","check-icon":"check-icon--3eS1f",checkIcon:"check-icon--3eS1f","register-button":"register-button--37g73",registerButton:"register-button--37g73","login-title":"login-title--39IQr",loginTitle:"login-title--39IQr","body-app":"body-app--2IvYB",bodyApp:"body-app--2IvYB",studylists:"studylists--3c2OS",studylist:"studylist--aNEWJ"}},O84i:function(t,e,s){"use strict";s.d(e,"a",(function(){return a})),s.d(e,"c",(function(){return i})),s.d(e,"b",(function(){return r}));const a=t=>t.view.showSaveButton,i=t=>t.view.showSidebar,r=t=>t.view.showShareModal},Wdl0:function(t,e,s){"use strict";s.d(e,"a",(function(){return a}));const a=t=>t.meta.currentMaterial},Zrzz:function(t,e,s){"use strict";var a=s("lSNA"),i=s.n(a),r=s("q1tI"),o=s.n(r),n=s("17x9"),d=s.n(n),u=s("/MKj"),l=s("TSYQ"),c=s.n(l),p=s("d2gv"),m=s.n(p),h=s("IP2g"),y=s("IkD9"),g=s.n(y),S=s("77UF"),b=s("Fn94");var I=t=>(e,s)=>{const a={...Object(b.a)(t,s().course.current,s().user),"User Studylist Count":s().user.studylists.length,Source:s().meta.currentMaterial};return g.a.track("Save Document Clicked",a).catch(S.i)},w=s("cH9Y"),D=s("kwEP"),v=s("0pXI"),C=s("Wdl0"),_=s("y6TR"),E=s("Elhd"),O=s.n(E),f=s("/U6g"),N=s.n(f),R=s("oeSZ"),T=s("Yw+G"),A=s("pJVQ"),j=s("14uC"),k=s.n(j),M=s("vDqi"),q=s.n(M),F=s("NsRu"),U=s.n(F);var x=t=>({type:U.a.ADD_STUDYLIST,studylist:t}),L=s("jiZR"),z=s.n(L);var H=t=>({type:z.a.ADD_CURRENT_TO_USER_STUDYLIST_IDS,studylistId:t});var P=(t,e,s)=>(a,i)=>{const r={"Studylist ID":t,"Studylist Name":e,"User Studylist Count":i().user.studylists.length+1,Source:s};return a(Object(v.a)("Studylist Created",r))};var B=(t,e,s,a)=>(i,r)=>{const o={...Object(b.a)(t,r().course.current,r().user),"Studylist ID":e,"Studylist Name":s,"Document User Studylist Count":t.userStudylistIds.length+1,Source:a};return i(Object(v.a)("Document Saved",o))},Y=s("N4+1"),W=s("PMJz"),G=s("Fmmj"),J=s("GN0R");var Q=(t,e,s)=>({type:z.a.ADD_TO_USER_STUDYLIST_IDS,categoryId:t,documentId:e,studylistId:s});var V=(t,e)=>(s,a)=>{const i={name:t,documentId:e.id};return q.a.post(O.a.route("api.studylists.store"),i).then(t=>{const i=t.data.data,r={id:i.id,name:i.name,createdAt:i.createdAt,updatedAt:i.updatedAt},o=a().meta.currentMaterial;let n;if(s(P(r.id,r.name,o)).then(()=>{i.documents.length>0&&s(B(e,r.id,r.name,o))}),i.documents.length>0)switch(s(Object(Y.a)(m.a.get("document_added_to_studylist",{studylistName:`<strong>${r.name}</strong>`}))),o){case J.d:n=s(H(r.id));break;case J.b:case J.c:case J.u:n=s(Q(e.category.id,e.id,r.id))}return Promise.all([s(x(r)),n])}).catch(t=>{throw s(Object(W.a)(Object(G.a)(t))),t})},K=s("dq6K"),Z=s("2iE4"),X=s("S3e9");class $ extends r.Component{constructor(t){super(t),i()(this,"handleCreateStudylist",t=>this.props.onCreateStudylist(t["studylist-name"])),this.studylistNameInput=o.a.createRef()}componentDidMount(){this.studylistNameInput.current.focus()}render(){return o.a.createElement("form",{onSubmit:this.props.handleSubmit(this.handleCreateStudylist),className:c()({"create-studylist":!this.props.isApp}),action:"."},o.a.createElement(K.a,{id:"studylist-name",name:"studylist-name",placeholder:m.a.get("enter_studylist_name"),label:!this.props.isApp&&o.a.createElement(h.a,{icon:"plus"}),formGroupClassName:c()({"create-studylist__input":!this.props.isApp}),inputRef:this.studylistNameInput,autoComplete:"off",hideErrors:!this.props.isApp}),this.props.isApp&&o.a.createElement("div",{className:"text-center"},o.a.createElement(Z.e,{size:"wide",loading:this.props.submitting,disabled:this.props.submitting,className:"mb1x",type:"submit",isApp:!0},k()(m.a.get("create"))),o.a.createElement(Z.c,{size:"minimum",color:"clear",type:"button",disabled:this.props.submitting,onClick:this.props.onCancel,isApp:!0},k()(m.a.get("previous")))),!this.props.isApp&&o.a.createElement(Z.d,{className:"create-studylist__buttons"},o.a.createElement(Z.i,{xxs:!0},o.a.createElement(Z.e,{loading:this.props.submitting,disabled:this.props.submitting,type:"submit"},k()(m.a.get("create")))),o.a.createElement(Z.c,{color:"gray-text",type:"button",disabled:this.props.submitting,onClick:this.props.onCancel},k()(m.a.get("cancel"))),o.a.createElement(Z.i,{xs:!0,sm:!0,md:!0,lg:!0},o.a.createElement(Z.e,{loading:this.props.submitting,disabled:this.props.submitting,type:"submit"},k()(m.a.get("create"))))))}}i()($,"propTypes",{onCreateStudylist:d.a.func.isRequired,onStudylistCreated:d.a.func.isRequired,documentToAdd:d.a.object.isRequired,onCancel:d.a.func.isRequired,isApp:d.a.bool,...T.a});$=Object(A.a)({form:"CreateStudylistForm",touchOnBlur:!1,validate:t=>({"studylist-name":Object(X.n)(t["studylist-name"])})})($);var tt=Object(u.connect)(null,(t,e)=>({onCreateStudylist:s=>t(V(s,e.documentToAdd)),onSubmitSuccess:e.onStudylistCreated}))($),et=s("qe5+");var st=(t,e,s)=>(a,i)=>q.a.post(O.a.route("api.studylists.documents.store",{studylistId:e,documentId:t.id}),{}).then(()=>{const r=i().meta.currentMaterial;switch(a(B(t,e,s,r)),a(Object(Y.a)(m.a.get("document_added_to_studylist",{studylistName:`<strong>${s}</strong>`}))),r){case J.d:return a(H(e));case J.b:case J.c:case J.u:return a(Q(t.category.id,t.id,e));default:console.error("Please use `metaSetCurrentMaterial` to set the current material.")}throw m.a.get("something_went_wrong")}).catch(t=>{throw a(Object(W.a)(Object(G.a)(t))),t}),at=s("DNGI");class it extends r.Component{constructor(...t){super(...t),i()(this,"handleChange",t=>t.target.checked?this.props.studylistId?this.props.handleSubmit(this.props.onAddDocumentToStudylist)():this.props.handleSubmit(this.props.onCreateStudylist)():this.props.handleSubmit(this.props.onRemoveDocumentFromStudylist)())}render(){return o.a.createElement("form",{onSubmit:S.i},o.a.createElement(at.a,{name:"is-in-studylist-"+this.props.studylistId,label:this.props.studylistName,onChange:this.handleChange,disabled:this.props.submitting,layout:"big",testSelector:this.props.testSelector}))}}i()(it,"propTypes",{studylistId:d.a.number,studylistName:d.a.string.isRequired,document:d.a.object.isRequired,documentIsInStudylist:d.a.bool.isRequired,onRemoveDocumentFromStudylist:d.a.func.isRequired,onAddDocumentToStudylist:d.a.func.isRequired,onCreateStudylist:d.a.func.isRequired,testSelector:d.a.string,...T.a}),it=Object(A.a)()(it);var rt=Object(u.connect)((t,e)=>({form:e.form||"ToggleDocumentInStudylistForm",initialValues:{["is-in-studylist-"+e.studylistId]:e.documentIsInStudylist}}),(t,e)=>({onRemoveDocumentFromStudylist:()=>t(Object(et.a)(e.document,e.studylistId,e.studylistName)),onAddDocumentToStudylist:()=>t(st(e.document,e.studylistId,e.studylistName)),onCreateStudylist:()=>t(V(e.studylistName,e.document))}))(it),ot=s("lkF8"),nt=s("bfUX");const dt={document:d.a.object.isRequired,show:d.a.bool.isRequired,onHide:d.a.func.isRequired,userStudylists:d.a.array.isRequired,currentMaterial:d.a.string.isRequired,documentUserStudylistIds:d.a.arrayOf(d.a.number).isRequired,showDefaultStudylist:d.a.bool.isRequired,userIsLogged:d.a.bool.isRequired,showDocumentTitle:d.a.bool,isApp:d.a.bool.isRequired};class ut extends r.Component{constructor(...t){super(...t),i()(this,"state",{showCreateStudylistForm:0===this.props.userStudylists.length&&!this.props.showDefaultStudylist}),i()(this,"handleShowCreateStudylistForm",()=>{this.setState({showCreateStudylistForm:!0})}),i()(this,"handleHideCreateStudylistForm",()=>{this.setState({showCreateStudylistForm:!1})}),i()(this,"handleExited",()=>{this.setState({showCreateStudylistForm:!1})}),i()(this,"renderLoginContent",()=>{const{currentMaterial:t}=this.props,e=t.toLowerCase()+"-save-document-discovery";return o.a.createElement("div",{className:N.a.loginWrapper},o.a.createElement(ot.a,{className:N.a.credentialsIcon}),o.a.createElement(Z.t,{size:"big",weight:"bold",className:N.a.loginTitle},m.a.get("you_need_register_to_save_studylist")),o.a.createElement(Z.t,null,o.a.createElement(h.a,{icon:"check",className:N.a.checkIcon}),m.a.get("conveniently_organize_documents_one_place")),o.a.createElement(nt.a,{size:"wide",color:"primary",href:O.a.route("registration.index",{origin:e}),trackAndRedirect:()=>Object(R.a)({origin:e}),className:c()("nav-button",N.a.registerButton),nofollow:!0,dataTestSelector:"registerButtonHeader"},m.a.get("registration__register")),o.a.createElement("p",null,m.a.get("registration_have_account")," ",o.a.createElement("a",{href:O.a.route("loginView",{origin:e}),className:"login"},m.a.get("registration_sign_in"))))}),i()(this,"renderContent",()=>{const{userStudylists:t,documentUserStudylistIds:e,showDefaultStudylist:s,document:a,isApp:i}=this.props,{showCreateStudylistForm:r}=this.state,{handleHideCreateStudylistForm:n}=this;if(i&&r)return o.a.createElement(tt,{onStudylistCreated:this.props.onHide,documentToAdd:a,onCancel:n,isApp:!0});if(t.length>0){const s=t.map((t,s)=>o.a.createElement("li",{key:t.id,className:N.a.studylist},o.a.createElement(rt,{form:"ToggleDocumentInStudylistForm"+t.id,document:a,studylistId:t.id,studylistName:t.name,documentIsInStudylist:e.includes(t.id),testSelector:"studylist-"+(s+1)})));return o.a.createElement("ul",{className:N.a.studylists},s)}return s?o.a.createElement("ul",{className:N.a.studylists},o.a.createElement("li",{className:N.a.studylist},o.a.createElement(rt,{document:a,studylistName:m.a.get("favorites"),documentIsInStudylist:!1,testSelector:"default-studylist"}))):o.a.createElement(Z.a,{type:"info"},m.a.get("no_studylists_yet"))}),i()(this,"renderFooter",()=>{const{isApp:t,document:e}=this.props,{showCreateStudylistForm:s}=this.state,{handleHideCreateStudylistForm:a,handleShowCreateStudylistForm:i}=this;return s?t?null:o.a.createElement(tt,{onStudylistCreated:this.props.onHide,documentToAdd:e,onCancel:a}):o.a.createElement("div",{className:"text-left"},o.a.createElement(Z.c,{size:"minimum",color:"text",type:"button",onClick:i},o.a.createElement(h.a,{icon:"plus"}),o.a.createElement("span",null,m.a.get("create_new_studylist"))))})}render(){const t=this.renderFooter();return o.a.createElement(Z.k,{show:this.props.show,onHide:this.props.onHide,onExited:this.handleExited,"data-is-app":this.props.isApp},o.a.createElement(Z.k.Header,null,m.a.get("save_to_studylist"),this.props.showDocumentTitle&&o.a.createElement(Z.t,{component:"div",size:"small",weight:"normal"},this.props.document.title)),o.a.createElement(Z.k.Body,{className:c()({[N.a.bodyApp]:this.props.isApp})},this.props.userIsLogged?this.renderContent():this.renderLoginContent()),this.props.userIsLogged&&t&&o.a.createElement(Z.k.Footer,null,t))}}ut.propTypes=dt,ut.defaultProps={showDocumentTitle:!1};var lt=ut,ct=s("lN+5");const pt={document:d.a.object.isRequired,userStudylists:d.a.array.isRequired,documentUserStudylistIds:d.a.array,showDefaultStudylist:d.a.bool.isRequired,trackSaveDocumentClicked:d.a.func.isRequired,trackShowLoginContentModal:d.a.func.isRequired,size:d.a.string,color:d.a.string,hideText:d.a.bool,className:d.a.string,showDocumentTitleInModal:d.a.bool,testSelector:d.a.string,currentOnboarding:d.a.oneOfType([d.a.array,d.a.object]).isRequired,handleOnboardingDone:d.a.func.isRequired,isForMobile:d.a.bool,activeIconClassName:d.a.string,isApp:d.a.bool,shouldShowOnboarding:d.a.bool.isRequired,handleOnboardingShown:d.a.func.isRequired,userIsLoggedIn:d.a.bool.isRequired,currentMaterial:d.a.string.isRequired};class mt extends r.Component{constructor(...t){super(...t),i()(this,"state",{showSaveDocumentModal:!1,testSelector:this.props.testSelector||"save-document-button-"+this.props.document.id}),i()(this,"handleClick",()=>{this.props.trackSaveDocumentClicked(),this.props.shouldShowOnboarding&&this.props.handleOnboardingDone(!1),this.props.userIsLoggedIn||this.props.trackShowLoginContentModal(this.props.currentMaterial),this.setState({showSaveDocumentModal:!0})}),i()(this,"handleHideSaveDocumentModal",()=>{this.setState({showSaveDocumentModal:!1})})}componentDidMount(){this.props.shouldShowOnboarding&&this.props.handleOnboardingShown()}render(){const t=this.props.documentUserStudylistIds.length>0,e=o.a.createElement(h.a,{icon:[t?"fas":"far","bookmark"],className:c()({[this.props.activeIconClassName]:t&&this.props.activeIconClassName})});let s;if(this.props.shouldShowOnboarding){const t=this.props.currentOnboarding[_.g];s=o.a.createElement(ct.a,{title:m.a.get(t.steps[0].title),onDismiss:this.props.handleOnboardingDone,arrowDirection:"right",dismissText:m.a.get("done"),className:c()(_.g,{"hidden-sm hidden-md hidden-lg":this.props.isForMobile}),testSelector:"onboarding-journey-save-document",show:0===t.currentStep},m.a.get(t.steps[0].tooltip_text))}return o.a.createElement(r.Fragment,null,o.a.createElement(Z.c,{size:this.props.size,color:this.props.color,type:"button",isApp:this.props.isApp,className:c()(this.props.className,{"ic-text":!this.props.hideText}),onClick:this.handleClick},e,!this.props.hideText&&(t?m.a.get("saved"):m.a.get("save"))),o.a.createElement(lt,{document:this.props.document,show:this.state.showSaveDocumentModal,onHide:this.handleHideSaveDocumentModal,userStudylists:this.props.userStudylists,documentUserStudylistIds:this.props.documentUserStudylistIds,showDefaultStudylist:this.props.showDefaultStudylist,showDocumentTitle:this.props.showDocumentTitleInModal,isApp:this.props.isApp,userIsLogged:this.props.userIsLoggedIn,currentMaterial:this.props.currentMaterial}),s)}}mt.propTypes=pt,mt.defaultProps={hideText:!1,showDocumentTitleInModal:!1,className:"",activeIconClassName:"text-green",isForMobile:!1,documentUserStudylistIds:[]};e.a=Object(u.connect)(t=>({userStudylists:t.user.studylists,showDefaultStudylist:t.studylist.showDefault,currentOnboarding:t.onboarding.current||{},isApp:t.meta.isApp,shouldShowOnboarding:t.document.current&&!t.document.current.preview&&t.onboarding.current.hasOwnProperty(_.g),userIsLoggedIn:t.user.isLoggedIn,currentMaterial:Object(C.a)(t)}),(t,e)=>({handleOnboardingDone:(e=!0)=>t(Object(w.a)(_.g,e)),handleOnboardingShown:()=>t(Object(D.a)(_.g)),trackSaveDocumentClicked:()=>t(I(e.document)),trackShowLoginContentModal:e=>t(Object(v.a)("Save Discovery Modal Shown",{Origin:e}))}))(mt)},cH9Y:function(t,e,s){"use strict";var a=s("y6TR"),i=s("IkD9"),r=s.n(i),o=s("77UF");var n=(t,e)=>(s,i)=>{const{onboarding:n}=i();let d;n.current.hasOwnProperty(a.b)?d="Search":n.current.hasOwnProperty(a.g)&&(d="Save Button");const u={"Click Type":t,"Onboarding Journey":d,"Onboarding Step":n.current[e].currentStep+1,"Onboarding Total Steps":n.current[e].steps.length};return r.a.track("Onboarding Clicked",u).catch(o.i)};e.a=(t,e)=>s=>(e&&s(n("Done",t)),s((t=>({type:a.a,journey:t}))(t)))},kwEP:function(t,e,s){"use strict";var a=s("vDqi"),i=s.n(a),r=s("Elhd"),o=s.n(r);e.a=t=>e=>i.a.post(o.a.route("api.user.onboarding.seen"),{journey:t})},"qe5+":function(t,e,s){"use strict";var a=s("vDqi"),i=s.n(a),r=s("Elhd"),o=s.n(r),n=s("d2gv"),d=s.n(n),u=s("jiZR"),l=s.n(u);var c=t=>({type:l.a.REMOVE_CURRENT_FROM_USER_STUDYLIST_IDS,studylistId:t}),p=s("Fn94"),m=s("0pXI");var h=(t,e,s,a)=>(i,r)=>{const o={...Object(p.a)(t,r().course.current,r().user),"Studylist ID":e,"Studylist Name":s,"Document User Studylist Count":t.userStudylistIds.length-1,Source:a};return i(Object(m.a)("Document Unsaved",o))},y=s("N4+1"),g=s("PMJz"),S=s("Fmmj"),b=s("GN0R");var I=(t,e,s)=>({type:l.a.REMOVE_FROM_USER_STUDYLIST_IDS,categoryId:t,documentId:e,studylistId:s}),w=s("qsz7");e.a=(t,e,s)=>(a,r)=>i.a.delete(o.a.route("api.studylists.documents.destroy",{studylistId:e,documentId:t.id})).then(()=>{const i=r().meta.currentMaterial;switch(a(h(t,e,s,i)),a(Object(y.a)(d.a.get("document_removed_from_studylist",{studylistName:`<strong>${s}</strong>`}))),i){case b.d:return a(c(e));case b.b:case b.c:return a(I(t.category.id,t.id,e));case b.u:return r().studylist.current.id===e?a(Object(w.a)(t.category.id,t.id,!0)):a(I(t.category.id,t.id,e));default:console.error("Please use `metaSetCurrentMaterial` to set the current material.")}throw d.a.get("something_went_wrong")}).catch(t=>{throw a(Object(g.a)(Object(S.a)(t))),t})},"v+l3":function(t,e,s){"use strict";var a=s("PQTe");e.a=t=>({type:a.c,show:t})}}]);